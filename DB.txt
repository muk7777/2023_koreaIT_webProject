DROP DATABASE IF EXISTS project;
CREATE DATABASE project;
USE project;

# article 테이블 생성
# truncate table article;
# drop table article;

CREATE TABLE article(
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , memberId INT UNSIGNED NOT NULL
    , groupId INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '속한 그룹이 없는 경우 : 0'
    , title VARCHAR(80) NOT NULL
    , `body` TEXT NOT NULL
);

# board 테이블 생성
# truncate table board;
# drop table board;

CREATE TABLE board(
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , `code` VARCHAR(20) NOT NULL UNIQUE COMMENT 'notice(공지사항), free(자유), ...'
    , `name` VARCHAR(40) NOT NULL UNIQUE COMMENT '게시판 이름'
    , delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '삭제여부 (삭제 전 = 0, 삭제 후 = 1)'
    , delDate DATETIME COMMENT '삭제 날짜'
);

# `member` 테이블 생성
# truncate table `member`;
# drop table `member`;

CREATE TABLE `member`(
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , loginId VARCHAR(30) NOT NULL UNIQUE
    , loginPw VARCHAR(100) NOT NULL
    , `authLevel` TINYINT UNSIGNED NOT NULL DEFAULT 1 COMMENT '권한 레벨 (일반 = 1, 관리자 = 3)'
    , `name` VARCHAR(20) NOT NULL
    , nickname VARCHAR(40) NOT NULL
    , cellphoneNum VARCHAR(20) NOT NULL
    , email VARCHAR(50) NOT NULL
    , groupId INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '속한 그룹이 없는 경우 : 0'
    , delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)'
    , delDate DATETIME COMMENT '탈퇴 날짜'
);

# `group` 테이블 생성
# truncate table `group`;
# drop table `group`;

CREATE TABLE `group`(
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , `name` VARCHAR(40) NOT NULL
    , delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)'
    , delDate DATETIME COMMENT '탈퇴 날짜'
);

# reply 테이블 생성
# truncate table reply;
# drop table reply;

CREATE TABLE reply (
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , memberId INT UNSIGNED NOT NULL
    , relTypeCode VARCHAR(20) NOT NULL COMMENT '관련 데이터 타입 코드'
    , relId INT UNSIGNED NOT NULL COMMENT '관련 데이터 번호'
    , `body` TEXT NOT NULL
);

# calendar 테이블 생성
# truncate table calendar;
# drop table calendar;

CREATE TABLE calendar(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT
	, regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , memberId INT UNSIGNED NOT NULL
	, groupId INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '속한 그룹이 없는 경우 : 0'
	, title VARCHAR(50) NOT NULL
	, writer VARCHAR(50) NOT NULL
	, content VARCHAR(1000) 
	, start1 DATETIME NOT NULL
	, end1 DATETIME NOT NULL
	, allDay TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '종일 하는 일정 (false = 0, true = 1)'
	, textColor VARCHAR(50)
	, backgroundColor VARCHAR(50)
	, borderColor VARCHAR(50)
);

SELECT * FROM article;
SELECT * FROM board;
SELECT * FROM `member`;
SELECT * FROM `group`;
SELECT * FROM reply;
SELECT * FROM calendar;

INSERT INTO calendar 
SET regDate = NOW()
    , updateDate = NOW()
    , memberId = 1
    , title = '할일'
    , writer = '나'
    , content = '테스트'
    , start1 = "2021-05-01T00:00:00"
    , end1 = "2021-05-03T00:00:00"
    , textColor = "yellow"
    , backgroundColor = "navy"
    , borderColor = "navy";

-- INSERT INTO article
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- memberId = 2,
-- boardId = 2,
-- title = '제목1',
-- `body` = '내용1';
-- 
-- INSERT INTO article
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- memberId = 3,
-- boardId = 2,
-- title = '제목2',
-- `body` = '내용2';
-- 
-- INSERT INTO article
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- memberId = 1,
-- boardId = 1,
-- title = '공지1',
-- `body` = '공지사항1';
-- 
-- INSERT INTO `member`
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- loginId = 'admin',
-- loginPw = SHA2('admin', 256),
-- authLevel = 3,
-- `name` = 'admin',
-- nickname = 'admin',
-- cellphoneNum = '01022222222',
-- email = 'admin@gmail.com';
-- 
-- INSERT INTO `member`
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- loginId = 'test2',
-- loginPw = SHA2('test2', 256),
-- `name` = 'test2',
-- nickname = 'test2',
-- cellphoneNum = '01011112222',
-- email = 'test2@gmail.com';
-- 
-- INSERT INTO `member`
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- loginId = 'test3',
-- loginPw = SHA2('test3', 256),
-- `name` = 'test3',
-- nickname = 'test3',
-- cellphoneNum = '01033334444',
-- email = 'test3@gmail.com';
-- 
-- INSERT INTO board
-- SET regDate = NOW(),
-- updateDate = NOW(),
-- `code` = 'notice',
-- `name` = '공지사항';
-- 
-- INSERT INTO board
-- SET reg//Date = NOW(),
-- updateDate = NOW(),
-- `code` = 'free',
-- `name` = '자유';
